
---

# SECTION 9: SQL TRANSACTIONS & ACID PROPERTIES

---

## 1. What is a Transaction?

A **transaction** is a **logical unit of work** that consists of one or more SQL statements.

üìå Either **all operations succeed** or **all fail**  
üìå Used to maintain **data consistency**

---

## 2. Why Transactions Are Important

- Banking systems
- Order processing
- Inventory management
- Any system where **data integrity is critical**

---

## 3. Transaction Control Language (TCL)

**TCL commands** are used to manage transactions.

| Command | Description |
|------|-------------|
| COMMIT | Save changes permanently |
| ROLLBACK | Undo changes |
| SAVEPOINT | Set rollback point |

---

## 4. COMMIT

### Purpose
Makes all changes **permanent**.

```sql
UPDATE employee SET salary = 60000 WHERE emp_id = 101;
COMMIT;
```
üìå After COMMIT ‚Üí changes cannot be undone


---

5. ROLLBACK

Purpose

Reverts changes made during transaction.
```
UPDATE employee SET salary = 70000 WHERE emp_id = 102;
ROLLBACK;
```
‚úîÔ∏è Salary change is undone


---

6. SAVEPOINT

Purpose

Creates a checkpoint within a transaction.


---

Example
```
SAVEPOINT sp1;

UPDATE employee SET salary = 80000 WHERE emp_id = 103;

ROLLBACK TO sp1;
```
‚úîÔ∏è Rolls back only to savepoint


---

7. Transaction Example (Complete Flow)
```
BEGIN;

INSERT INTO employee VALUES (105, 'Kiran', 45000, 'IT');
UPDATE employee SET salary = 50000 WHERE emp_id = 101;

ROLLBACK;
```
üìå No changes saved


---

8. Auto-Commit Mode

Enabled by default in most DBs

Each SQL statement is committed automatically

```
SET autocommit = 0;
```
üìå Disable auto-commit for manual transactions


---

9. DDL vs DML in Transactions (INTERVIEW FAVORITE ‚≠ê)

Command Type	Supports Rollback

DML (INSERT, UPDATE, DELETE)	Yes
DDL (CREATE, DROP, ALTER)	No


üìå DDL commands auto-commit


---

10. ACID Properties (VERY IMPORTANT ‚≠ê‚≠ê‚≠ê)

ACID ensures reliable transactions.


---

A ‚Äì Atomicity

All or nothing

Partial updates not allowed


üìå Example: Bank transfer


---

C ‚Äì Consistency

Data must remain valid

Constraints must be followed


üìå Example: Balance cannot be negative


---

I ‚Äì Isolation

Transactions run independently

No interference


üìå Example: Dirty reads avoided


---

D ‚Äì Durability

Committed data is permanent

Even after system crash



---

11. Isolation Levels (Advanced Interview Topic ‚≠ê)

Level	Description

READ UNCOMMITTED	Allows dirty reads
READ COMMITTED	Prevents dirty reads
REPEATABLE READ	Prevents non-repeatable reads
SERIALIZABLE	Highest isolation


üìå Higher isolation ‚Üí Lower performance


---

12. Common Transaction Problems

Problem	Description

Dirty Read	Reading uncommitted data
Non-Repeatable Read	Data changes between reads
Phantom Read	New rows appear



---

Key Points to Remember

Transaction = logical unit

COMMIT saves, ROLLBACK undoes

SAVEPOINT allows partial rollback

DDL auto-commits

ACID ensures reliability



---

Interview Questions

Basic

1. What is a transaction?


2. What is COMMIT?


3. What is ROLLBACK?




---

Intermediate

4. Difference between COMMIT and ROLLBACK?


5. What is SAVEPOINT?


6. Do DDL commands support rollback?




---

Advanced

7. Explain ACID properties.


8. What is isolation level?


9. What is dirty read?




---

Scenario-Based Questions

Scenario 1

Transfer money between two accounts.
```
BEGIN;

UPDATE account SET balance = balance - 1000 WHERE acc_no = 1;
UPDATE account SET balance = balance + 1000 WHERE acc_no = 2;

COMMIT;
```

---

Scenario 2

Undo accidental update.
```
ROLLBACK;
```

---

Scenario 3

Rollback only part of transaction.
```
SAVEPOINT s1;
ROLLBACK TO s1;
```

---

Practice Questions

1. Explain ACID with real-time example.


2. Write a transaction with SAVEPOINT.


3. What happens if system crashes after COMMIT?


4. Difference between auto-commit and manual commit?


5. Which isolation level gives best consistency?
